(function($){var open_checkout_overlay=function($pay_link,closeCallback){Paddle.Checkout.open({override:$pay_link,successCallback:function(data){window.location.replace(data.checkout.redirect_url);},closeCallback:closeCallback});};var buynow_add_to_cart=function(e){var form=$(this).parents(".edd_download_purchase_form");if(form.find(".edd_action_input").val()!=="straight_to_gateway"){return;}e.preventDefault();e.stopPropagation();e.stopPropagation();e.stopImmediatePropagation();var quantity;var price_id=false;var download_id=form.find('input[name="download_id"]').val();var result=form.children('input[name="edd_options[price_id][]"]').val()||false;if(false!==result){price_id=result;}else{price_id=form.find(".edd_price_options input:radio:checked").val()||false;}quantity=form.find(".edd-item-quantity").val()||1;$(this).attr("data-edd-loading","");$.post(edd_owp_paddle_js.ajax_url,{action:"owp_edd_paddle_buy_now",download_id:download_id,price_id:price_id,quantity:quantity},function(response){if(typeof response.success!=="undefined"&&response.success===true&&typeof response.data.pay_link!=="undefined"){var label=form.find(".edd-add-to-cart-label").text();var closeCallback=function(){form.find(".edd-add-to-cart").removeAttr("data-edd-loading");form.find(".edd-add-to-cart-label").text(label).show();};open_checkout_overlay(response.data.pay_link,closeCallback);}else{console.log("Unable to generate pay link");}});return false;};$(function(){Paddle.Setup({vendor:parseInt(edd_owp_paddle_js.vendor_id),debug:edd_owp_paddle_js.debug});$(document.body).on("click","form.edd_download_purchase_form .edd-add-to-cart",buynow_add_to_cart);});})(jQuery);